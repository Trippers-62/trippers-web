<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trippers</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link th:href="@{/css/trippers.css}" rel="stylesheet" href="/css/trippers.css" />
  </head>
  <body class="main mb-5">
    <header>
      <nav th:replace="~{navbar :: header}"></nav>
    </header>

    <div class="container">
      <h1 class="mt-5 m-3">항공권 및 숙박 검색 결과</h1>

      <!-- Flight Results -->
      <h2 class="mt-5 m-3">항공권 결과</h2>
      <h5 class="mt-1 m-3">
        출발 도시 : <span id="departureCity" th:text="${searchForm.departureCity}"></span>
      </h5>
      <h5 class="mt-1 m-3">
        도착 도시 : <span id="arrivalCity" th:text="${searchForm.arrivalCity}"></span>
      </h5>

      <h5 class="mt-1 m-3">
        여행 유형:  <span id="tripType" th:text="${searchForm.tripType}"></span>
      </h5>

      <!-- Pagination -->
<!--      <div th:if="${flights.totalPages > 1}">-->
<!--        <ul class="pagination">-->
<!--          <li class="page-item" th:class="${flights.first} ? 'disabled' : ''">-->
<!--            <a class="page-link" th:href="@{/search/result(page=0)}">&lt;&lt;</a>-->
<!--          </li>-->
<!--          <li class="page-item" th:class="${flights.first} ? 'disabled' : ''">-->
<!--            <a class="page-link" th:href="@{/search/result(page=${flights.number - 1},-->
<!--                     ${#request.params}, ${#request.queryString})}">&lt;</a>-->
<!--          </li>-->
<!--&lt;!&ndash;          <li class="page-item" th:class="${flights.first} ? 'disabled' : ''">&ndash;&gt;-->
<!--&lt;!&ndash;            <a class="page-link" th:href="@{/search/result(page=${flights.number - 1})}">&lt;</a>&ndash;&gt;-->
<!--&lt;!&ndash;          </li>&ndash;&gt;-->
<!--          <li class="page-item" th:each="i : ${#numbers.sequence(0, flights.totalPages - 1)}" th:class="${flights.number == i} ? 'active' : ''">-->
<!--            <a class="page-link" th:href="@{/search/result(page=${i})}" th:text="${i + 1}"></a>-->
<!--          </li>-->
<!--          <li class="page-item" th:class="${flights.last} ? 'disabled' : ''">-->
<!--            <a class="page-link" th:href="@{/search/result(page=${flights.number + 1})}">&gt;</a>-->
<!--          </li>-->
<!--          <li class="page-item" th:class="${flights.last} ? 'disabled' : ''">-->
<!--            <a class="page-link" th:href="@{/search/result(page=${flights.totalPages - 1})}">&gt;&gt;</a>-->
<!--          </li>-->
<!--        </ul>-->
<!--      </div>-->

      <table th:if="${searchForm.tripType == 'oneWay'}" class="table m-3">
        <thead>
        <tr>
          <th scope="col">출발 날짜/시간</th>
          <th scope="col">가격</th>
          <th scope="col">항공사</th>
          <th scope="col">환승 횟수</th>
        </tr>
        </thead>
        <tbody>
        <!-- Flight results rows will be dynamically populated here -->
        <tr th:each="flight : ${flights}">
          <td th:text="${flight.departureDatetime}">출발날짜1</td>
          <td th:text="${flight.price}">가격1</td>
          <td th:text="${flight.airline}">항공사1</td>
          <td th:text="${flight.transferCount}">환승횟수1</td>
        </tr>
        <!-- Add more rows as needed -->
        </tbody>
      </table>

      <table th:if="${searchForm.tripType == 'roundTrip'}" class="table m-3">
        <thead>
        <tr>
          <th scope="col">출발 날짜/시간</th>
          <th scope="col">귀국 날짜/시간</th>
          <th scope="col">가격</th>
          <th scope="col">항공사</th>
          <th scope="col">환승 횟수</th>
        </tr>
        </thead>
        <tbody>
        <!-- Flight results rows will be dynamically populated here -->
        <tr th:each="flight : ${flights}">
          <td th:text="${flight.departureDatetime}">출발날짜1</td>
          <td th:text="${flight.returnDepartureDatetime}">귀국날짜1</td>
          <td th:text="${flight.price}">가격1</td>
          <td th:text="${flight.airline}">항공사1</td>
          <td th:text="${flight.transferCount}">환승횟수1</td>
        </tr>
        <!-- Add more rows as needed -->
        </tbody>
      </table>

      <!-- Accommodation Results -->
      <h2 class="mt-5 m-3">숙박 결과</h2>
      <h5 class="mt-1 m-3">
        도착 도시 : <span th:text="${searchForm.arrivalCity}"></span>
      </h5>

      <div th:each="entry : ${accomodationsByDate}">
        <h5 class="mt-1 m-3">
          날짜 : <span th:text="${entry.key}"></span>
        </h5>
        <table  class="table m-3">
          <thead>
          <tr>
            <th scope="col">가격</th>
            <th scope="col">평점</th>
            <th scope="col">체크인 날짜/시간</th>
            <th scope="col">체크아웃 날짜/시간</th>
          </tr>
          </thead>
          <tbody>
          <!-- Accommodation results rows will be dynamically populated here -->
          <tr th:each="accomodation : ${entry.value.content}">
            <td th:text="${accomodation.price}">가격1</td>
            <td th:text="${accomodation.rating}">평점1</td>
            <td th:text="${accomodation.checkinDate}">체크인날짜1</td>
            <td th:text="${accomodation.checkoutDate}">체크아웃날짜1</td>
          </tr>
          </tbody>
        </table>
      </div>

    </div>

  </body>
</html>
